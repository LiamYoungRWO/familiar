% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/FamiliarCollectionExport.R
\name{export_stratification_data}
\alias{export_stratification_data}
\alias{export_stratification_data,familiarCollection-method}
\alias{export_stratification_data,ANY-method}
\title{Extract and export sample risk group stratification and associated
tests.}
\usage{
export_stratification_data(object, dir_path = NULL, ...)

\S4method{export_stratification_data}{familiarCollection}(object, dir_path = NULL, ...)

\S4method{export_stratification_data}{ANY}(object, dir_path = NULL, ...)
}
\arguments{
\item{object}{A \code{familiarCollection} object, or other other objects from which
a \code{familiarCollection} can be extracted. See details for more information.}

\item{dir_path}{Path to folder where extracted data should be saved. \code{NULL}
will allow export as a structured list of data.tables.}

\item{...}{
  Arguments passed on to \code{\link[=extract_stratification_data]{extract_stratification_data}}, \code{\link[=as_familiar_collection]{as_familiar_collection}}
  \describe{
    \item{\code{data}}{A \code{dataObject} object, \code{data.table} or \code{data.frame} that
constitutes the data that are used to compute}
    \item{\code{ensemble_method}}{Method for ensembling predictions from models for the
same sample. Available methods are:
\itemize{
\item \code{mean}: Use the mean of the predicted values as the ensemble value for a
sample.
}}
    \item{\code{time_max}}{Time point which is used as the benchmark for e.g. cumulative
risks generated by random forest, or the cutoff for Uno's concordance index.
If not provided explicitly, this parameter is read from settings used at
creation of the underlying \code{familiarModel} objects. Only used for \code{survival}
outcomes.}
    \item{\code{risk_ensemble_method}}{Method for ensembling the risk group assignments
from different models for the same sample.

The following methods are available:
\itemize{
\item \code{ensemble_mean}: Risk groups are determined for each sample using the
threshold values of the different models in the ensemble. The risk groups
are treated as ordinal and encoded using integer values. The mean of the
encoded values is computed. The risk group bin containing the mean value is
then used as the ensemble-based risk group.
\item \code{ensemble_mode} (default): Risk groups are determined for each sample
using the threshold values of the different models in the ensemble. The most
commonly assigned risk group is then used as the ensemble-based risk group.
\item \code{median_threshold}: The median threshold value for each risk group is
determined from the threshold values of the different models in the
ensemble. The resulting threshold(s) are then applied to the ensemble
prediction of a sample to identify the ensemble-based risk group.
\item \code{mean_threshold}: Similar to \code{median_threshold}, but uses the mean
threshold value for each risk group.
}

If not provided explicitly, this parameter is read from settings used at
creation of the underlying \code{familiarModel} objects. This parameter is only
relevant for \code{survival} outcomes.}
    \item{\code{verbose}}{Flag to indicate whether feedback should be provided on the
computation and extraction of various data elements.}
    \item{\code{familiar_data_names}}{Names of the dataset(s). Only used if the \code{object} parameter
is one or more \code{familiarData} objects.}
    \item{\code{collection_name}}{Name of the collection.}
  }}
}
\value{
A list of data.tables (if \code{dir_path} is not provided), or nothing, as
all data is exported to \code{csv} files.
}
\description{
Extract and export sample risk group stratification and
associated tests for data in a familiarCollection.
}
\details{
Data is usually collected from a \code{familiarCollection} object.
However, you can also provide one or more \code{familiarData} objects, that will
be internally converted to a \code{familiarCollection} object. It is also
possible to provide a \code{familiarEnsemble} or one or more \code{familiarModel}
objects together with the data from which data is computed prior to export.
Paths to the previous files can also be provided.

All parameters aside from \code{object} and \code{dir_path} are only used if \code{object}
is not a \code{familiarCollection} object, or a path to one.

Three tables are exported in a list:
\itemize{
\item \code{data}: Contains the assigned risk group for a given sample, along with
its reported survival time and censoring status.
\item \code{hr_ratio}: Contains the hazard ratio between different risk groups.
\item \code{logrank}: Contains the results from the logrank test between different
risk groups.
}
}
